https://controllerstech.com/pwm-in-stm32/
